<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
                "http://www.w3.org/TR/REC-html40/loose.dtd">
<html>
<head>
  <title>Description of BiofeedbackSL</title>
  <meta name="keywords" content="BiofeedbackSL">
  <meta name="description" content="">
  <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
  <meta name="generator" content="m2html &copy; 2003-2019 Guillaume Flandin">
  <meta name="robots" content="index, follow">
  <link type="text/css" rel="stylesheet" href="../../../m2html.css">
</head>
<body>
<a name="_top"></a>
<div><a href="../../../index.html">Home</a> &gt;  <a href="#">labTools</a> &gt; <a href="#">classes</a> &gt; <a href="index.html">Biofeedback</a> &gt; BiofeedbackSL.m</div>

<!--<table width="100%"><tr><td align="left"><a href="../../../index.html"><img alt="<" border="0" src="../../../left.png">&nbsp;Master index</a></td>
<td align="right"><a href="index.html">Index for labTools/classes/Biofeedback&nbsp;<img alt=">" border="0" src="../../../right.png"></a></td></tr></table>-->

<h1>BiofeedbackSL
</h1>

<h2><a name="_name"></a>PURPOSE <a href="#_top"><img alt="^" border="0" src="../../../up.png"></a></h2>
<div class="box"><strong></strong></div>

<h2><a name="_synopsis"></a>SYNOPSIS <a href="#_top"><img alt="^" border="0" src="../../../up.png"></a></h2>
<div class="box"><strong>This is a script file. </strong></div>

<h2><a name="_description"></a>DESCRIPTION <a href="#_top"><img alt="^" border="0" src="../../../up.png"></a></h2>
<div class="fragment"><pre class="comment"></pre></div>

<!-- crossreference -->
<h2><a name="_cross"></a>CROSS-REFERENCE INFORMATION <a href="#_top"><img alt="^" border="0" src="../../../up.png"></a></h2>
This function calls:
<ul style="list-style-image:url(../../../matlabicon.gif)">
<li><a href="BiofeedbackSL.html" class="code" title="">BiofeedbackSL</a>	</li></ul>
This function is called by:
<ul style="list-style-image:url(../../../matlabicon.gif)">
<li><a href="BiofeedbackSL.html" class="code" title="">BiofeedbackSL</a>	</li></ul>
<!-- crossreference -->

<h2><a name="_subfunctions"></a>SUBFUNCTIONS <a href="#_top"><img alt="^" border="0" src="../../../up.png"></a></h2>
<ul style="list-style-image:url(../../../matlabicon.gif)">
<li><a href="#_sub1" class="code">function this=BiofeedbackSL(ID,date,day,sex,dob,dleg,dhand,fastleg,height,weight,age,triallist,Rtarget,Ltarget,OGsteplength,OGspeed)</a></li><li><a href="#_sub2" class="code">function []=AnalyzePerformance(this)</a></li><li><a href="#_sub3" class="code">function []=editTriallist(this)</a></li><li><a href="#_sub4" class="code">function []=saveit(this)</a></li><li><a href="#_sub5" class="code">function []=comparedays(this,flag)</a></li></ul>

<h2><a name="_source"></a>SOURCE CODE <a href="#_top"><img alt="^" border="0" src="../../../up.png"></a></h2>
<div class="fragment"><pre>0001 classdef <a href="BiofeedbackSL.html" class="code" title="">BiofeedbackSL</a>
0002     <span class="comment">%Class BiofeedbackMD houses metadata and methods to process step length</span>
0003     <span class="comment">%biofeedback trials</span>
0004     <span class="comment">%</span>
0005     <span class="comment">%Properties:</span>
0006     <span class="comment">%</span>
0007     <span class="comment">%   subjectcode = '' string containing subject code, e.g. 'SLP001'</span>
0008     <span class="comment">%   date=''  Date of the experiment, lab date object</span>
0009     <span class="comment">%   day='' string that indicates day1 or day2 testing</span>
0010     <span class="comment">%   sex = '' string designates subject sex e.g. 'f'</span>
0011     <span class="comment">%   dob='' lab date object with date of birth</span>
0012     <span class="comment">%   dominantleg='' string designate dominant leg, e.g. 'r'</span>
0013     <span class="comment">%   dominanthand = '' string designate dominant hand e.g. 'r'</span>
0014     <span class="comment">%   height=[];  cm</span>
0015     <span class="comment">%   weight=[];  kg</span>
0016     <span class="comment">%   age=[];  years</span>
0017     <span class="comment">%</span>
0018     <span class="comment">%   triallist={};  cell array of trial #'s, filenames, and type of</span>
0019     <span class="comment">%   trial. construct instance with blank cell, can input data using a</span>
0020     <span class="comment">%   method instead of copying and pasting into inputs</span>
0021     <span class="comment">%</span>
0022     <span class="comment">%   Rtmtarget=[]; right leg step length target as determined by treadmill baseline</span>
0023     <span class="comment">%</span>
0024     <span class="comment">%   Ltmtarget=[]; left leg step length target as determined by treadmill baseline</span>
0025     <span class="comment">%</span>
0026     <span class="comment">%   OGsteplength=[]; step length target as determined by over-ground walking</span>
0027     <span class="comment">%</span>
0028     <span class="comment">%    OGspeed=[]; average speed of subject during the OG trial to determine OG steplength</span>
0029     <span class="comment">%</span>
0030     <span class="comment">%Methods:</span>
0031     <span class="comment">%</span>
0032     <span class="comment">%   AnalyzePerformance(flag) -- computes step length errors for each</span>
0033     <span class="comment">%                               biofeedback trial,</span>
0034     <span class="comment">%</span>
0035     <span class="comment">%   editTriallist() -- select filenames, edit trial #'s and type and</span>
0036     <span class="comment">%                      category, input num is the # of trials, or rows in the list</span>
0037     <span class="comment">%</span>
0038     <span class="comment">%   saveit() -- saves the instance with filename equal to the ID</span>
0039     <span class="comment">%</span>
0040     <span class="comment">%   comparedays() -- makes bar plots comparing day1 and day2</span>
0041 
0042     
0043     properties
0044         subjectcode = <span class="string">''</span>
0045         date=<span class="string">''</span>
0046         day=<span class="string">''</span>
0047         sex = <span class="string">''</span>
0048         dob=<span class="string">''</span>
0049         dominantleg=<span class="string">''</span>
0050         dominanthand = <span class="string">''</span>
0051         fastleg = <span class="string">''</span>
0052         height=[];
0053         weight=[];
0054         age=[];
0055         triallist={};
0056         Rtmtarget=[];
0057         Ltmtarget=[];
0058         OGsteplength=[];
0059         OGspeed=[];
0060         datalocation=pwd;
0061         data={};
0062         dataheader={};
0063         
0064         
0065     <span class="keyword">end</span>
0066     
0067     methods
0068         <span class="comment">%constuctor</span>
0069         <a name="_sub0" href="#_subfunctions" class="code">function this=BiofeedbackSL(ID,date,day,sex,dob,dleg,dhand,fastleg,height,weight,age,triallist,Rtarget,Ltarget,OGsteplength,OGspeed)</a>
0070         
0071             <span class="keyword">if</span> nargin ~= 16
0072 <span class="comment">%                 disp('Error, incorrect # of input arguments provided');</span>
0073                 cprintf(<span class="string">'err'</span>,<span class="string">'Error: incorrect # of input arguments provided\n'</span>);
0074             <span class="keyword">else</span>
0075                 
0076                 <span class="keyword">if</span> ischar(ID)
0077                     this.subjectcode=ID;
0078                 <span class="keyword">else</span>
0079                     this.subjectcode=<span class="string">''</span>;
0080                     cprintf(<span class="string">'err'</span>,<span class="string">'WARNING: invalid subject ID input, must be a string\n'</span>);
0081                 <span class="keyword">end</span>
0082                 
0083                 <span class="keyword">if</span> isa(date,<span class="string">'labDate'</span>)
0084                     this.date = date;
0085                 <span class="keyword">else</span>
0086                     cprintf(<span class="string">'err'</span>,<span class="string">'WARNING: incorrect experiment date format provided, must be class labDate\n'</span>);
0087                     this.date=<span class="string">''</span>;
0088                 <span class="keyword">end</span>
0089                 
0090                 <span class="keyword">if</span> isnumeric(day)
0091                     this.day = day;
0092                 <span class="keyword">else</span>
0093                     cprintf(<span class="string">'err'</span>,<span class="string">'WARNING: input for day must be a number\n'</span>);
0094                     this.day=<span class="string">''</span>;
0095                 <span class="keyword">end</span>
0096                     
0097                 <span class="keyword">if</span> ischar(sex)
0098                     this.sex = sex;
0099                 <span class="keyword">else</span>
0100                     cprintf(<span class="string">'err'</span>,<span class="string">'WARNING: input for sex must be a string\n'</span>);
0101                     this.sex=<span class="string">''</span>;
0102                 <span class="keyword">end</span>
0103                 
0104                 <span class="keyword">if</span> isa(dob,<span class="string">'labDate'</span>)
0105                     this.dob=dob;
0106                 <span class="keyword">else</span>
0107                     cprintf(<span class="string">'err'</span>,<span class="string">'WARNING: date of birth is not the correct format\n'</span>);
0108                     this.dob=[];
0109                 <span class="keyword">end</span>
0110                 
0111                 <span class="keyword">if</span> ischar(dleg)
0112                     this.dominantleg=dleg;
0113                 <span class="keyword">else</span>
0114                     cprintf(<span class="string">'err'</span>,<span class="string">'WARNING: incorrect format for dominant leg input, must be a string\n'</span>);
0115                     this.dominantleg=<span class="string">''</span>;
0116                 <span class="keyword">end</span>
0117                 
0118                 <span class="keyword">if</span> ischar(dhand)
0119                     this.dominanthand=dhand;
0120                 <span class="keyword">else</span>
0121                     cprintf(<span class="string">'err'</span>,<span class="string">'WARNING: incorrect format for dominant hand input, must be a string\n'</span>);
0122                     this.dominanthand=<span class="string">''</span>;
0123                 <span class="keyword">end</span>
0124                 
0125                 <span class="keyword">if</span> ischar(fastleg)
0126                     this.fastleg=fastleg;
0127                 <span class="keyword">else</span>
0128                     cprintf(<span class="string">'err'</span>,<span class="string">'WARNING: incorrect format for fast leg, must be a string\n'</span>);
0129                     this.fastleg=<span class="string">''</span>;
0130                 <span class="keyword">end</span>
0131                 
0132                 <span class="keyword">if</span> isnumeric(height)
0133                     this.height = height;
0134                 <span class="keyword">else</span>
0135                     cprintf(<span class="string">'err'</span>,<span class="string">'WARNING: input height is not numeric\n'</span>);
0136                     this.height=[];
0137                 <span class="keyword">end</span>
0138                 
0139                 <span class="keyword">if</span> isnumeric(weight)
0140                     this.weight = weight;
0141                 <span class="keyword">else</span>
0142                     cprintf(<span class="string">'err'</span>,<span class="string">'WARNING: input weight is not numeric\n'</span>);
0143                     this.weight=[];
0144                 <span class="keyword">end</span>
0145                 
0146                 <span class="keyword">if</span> isa(age,<span class="string">'labDate'</span>)
0147                     this.age = age;
0148                 <span class="keyword">else</span>
0149                     cprintf(<span class="string">'err'</span>,<span class="string">'WARNING: input weight is not class labDate\n'</span>);
0150                     this.age=[];
0151                 <span class="keyword">end</span>
0152                 
0153                 <span class="keyword">if</span> iscell(triallist)
0154                     this.triallist=triallist;
0155                 <span class="keyword">else</span>
0156                     cprintf(<span class="string">'err'</span>,<span class="string">'WARNING: triallist input is not a cell format.\n'</span>);
0157                     this.triallist={};
0158                 <span class="keyword">end</span>
0159                 
0160                 <span class="keyword">if</span> isnumeric(Rtarget)
0161                     this.Rtmtarget = Rtarget;
0162                 <span class="keyword">else</span>
0163                     cprintf(<span class="string">'err'</span>,<span class="string">'WARNING: Right step length target is not numeric type.\n'</span>);
0164                     this.Rtmtarget = [];
0165                 <span class="keyword">end</span>
0166                 
0167                 <span class="keyword">if</span> isnumeric(Ltarget)
0168                     this.Ltmtarget = Ltarget;
0169                 <span class="keyword">else</span>
0170                     cprintf(<span class="string">'err'</span>,<span class="string">'WARNING: Left step length target is not numeric type.\n'</span>);
0171                     this.Ltmtarget = [];
0172                 <span class="keyword">end</span>
0173                     
0174                 <span class="keyword">if</span> isnumeric(OGsteplength)
0175                     this.OGsteplength = OGsteplength;
0176                 <span class="keyword">else</span>
0177                     cprintf(<span class="string">'err'</span>,<span class="string">'WARNING: OG step length target is not numeric type.\n'</span>);
0178                     this.OGsteplength = [];
0179                 <span class="keyword">end</span>
0180                 
0181                 <span class="keyword">if</span> isnumeric(OGspeed)
0182                     this.OGspeed = OGspeed;
0183                 <span class="keyword">else</span>
0184                     cprintf(<span class="string">'err'</span>,<span class="string">'WARNING: OG speed is not numeric type.\n'</span>);
0185                     this.OGspeed = [];
0186                 <span class="keyword">end</span>
0187                 
0188             <span class="keyword">end</span>
0189 
0190             
0191             
0192         <span class="keyword">end</span>
0193         
0194         <a name="_sub1" href="#_subfunctions" class="code">function []=AnalyzePerformance(this)</a>
0195             <span class="comment">%compute step length error for each trial, uses instance</span>
0196             <span class="comment">%defined target values and the default tolerance of 0.0375 m</span>
0197             <span class="comment">%</span>
0198             <span class="comment">%auto-saves the results</span>
0199 
0200             <span class="keyword">global</span> rhits
0201             <span class="keyword">global</span> lhits
0202             
0203             <span class="keyword">if</span> isempty(this.triallist)
0204                 cprintf(<span class="string">'err'</span>,<span class="string">'WARNING: no trial information available to analyze'</span>);
0205             <span class="keyword">else</span>
0206                filename = this.triallist(:,1);
0207 
0208                <span class="keyword">if</span> iscell(filename)<span class="comment">%if more than one file is selected for analysis</span>
0209 
0210                    rhits = {0};
0211                    lhits = {0};
0212                    rlqr = {0};
0213                    llqr = {0};
0214                    WB = waitbar(0,<span class="string">'Processing Trials...'</span>);
0215                    <span class="keyword">for</span> z = 1:length(filename)
0216                        tempname = filename{z};
0217                        waitbar((z-1)/length(filename),WB,[<span class="string">'Processing Trial '</span> num2str(z)]);
0218                        <span class="keyword">if</span> strcmp(tempname(end-5:end-4),<span class="string">'V3'</span>) || strcmp(tempname(end-14:end-13),<span class="string">'V7'</span>)
0219                            color{z} = <span class="string">'blue'</span>;
0220                        <span class="keyword">elseif</span> strcmp(tempname(end-10:end-4),<span class="string">'rev12V1'</span>)
0221                            color{z} = <span class="string">'yellow'</span>;
0222                        <span class="keyword">else</span>
0223                            color{z} = <span class="string">'red'</span>;
0224                        <span class="keyword">end</span>
0225                        
0226                        <span class="comment">%check to see if data is already processed, it will</span>
0227                        <span class="comment">%save time...</span>
0228                        <span class="keyword">if</span> length(this.data)&lt;z
0229                            disp(<span class="string">'Parsing data...'</span>);
0230                            f = fopen(filename{z});
0231                            g = fgetl(f);
0232                            fclose(f);
0233                            
0234                            <span class="keyword">if</span> strcmp(g(1),<span class="string">'['</span>)
0235                                [header,data] = JSONtxt2cell(filename{z});
0236                                this.data{z} = data;
0237                                this.dataheader = header;
0238                            <span class="keyword">else</span>
0239                                S = importdata(filename{z},<span class="string">','</span>,1);
0240                                data = S.data;
0241                                this.data{z} = S.data;
0242                                this.dataheader = S.textdata;
0243                            <span class="keyword">end</span>
0244                            
0245                        <span class="keyword">else</span>
0246                            data = cell2mat(this.data(z));
0247                            header = this.dataheader;
0248                        <span class="keyword">end</span>
0249                        [~,n] = size(data);
0250 <span class="comment">%                        keyboard</span>
0251                        data2 = unique(data,<span class="string">'rows'</span>,<span class="string">'stable'</span>);<span class="comment">%remove duplicate frames</span>
0252                        data2(:,1) = data2(:,1)-data2(1,1)+1;<span class="comment">%set frame # to start at 1</span>
0253                        
0254                        <span class="comment">%check for monotonicity</span>
0255                        checkers = find(diff(data2(:,1))&lt;1);
0256                        <span class="keyword">while</span> ~isempty(checkers)
0257                            <span class="keyword">for</span> y=1:length(checkers)
0258                                data2(checkers(y),:)=[];
0259                            <span class="keyword">end</span>
0260                            checkers = find(diff(data2(:,1))&lt;1);
0261                        <span class="keyword">end</span>
0262 <span class="comment">%                        keyboard</span>
0263                        <span class="keyword">for</span> zz = 1:n
0264                            data3(data2(:,1),zz) = data2(:,zz);
0265                        <span class="keyword">end</span>
0266                        frame = data3(:,1);
0267                        frame2 = 1:1:data2(<span class="keyword">end</span>,1);
0268 <span class="comment">%                        keyboard</span>
0269                        Rz2 = interp1(data2(:,1),data2(:,2),frame2,<span class="string">'linear'</span>);
0270                        Lz2 = interp1(data2(:,1),data2(:,3),frame2,<span class="string">'linear'</span>);
0271                        Rgamma2 = interp1(data2(:,1),data2(:,6),frame2,<span class="string">'linear'</span>);
0272                        Lgamma2 = interp1(data2(:,1),data2(:,7),frame2,<span class="string">'linear'</span>);
0273                        
0274                        <span class="comment">%detect HS</span>
0275                        <span class="keyword">for</span> zz = 1:length(Rz2)-1
0276                            <span class="keyword">if</span> Rz2(zz) &gt; -10 &amp;&amp; Rz2(zz+1) &lt;= -10
0277                                RHS(zz) = 1;
0278                            <span class="keyword">else</span>
0279                                RHS(zz) = 0;
0280                            <span class="keyword">end</span>
0281                        <span class="keyword">end</span>
0282                        [~,trhs] = findpeaks(RHS,<span class="string">'MinPeakDistance'</span>,100);
0283                        RHS = zeros(length(RHS),1);
0284                        RHS(trhs) = 1;
0285                        <span class="keyword">for</span> zz = 1:length(Lz2)-1
0286                            <span class="keyword">if</span> Lz2(zz) &gt; -10 &amp;&amp; Lz2(zz+1) &lt;= -10
0287                                LHS(zz) = 1;
0288                            <span class="keyword">else</span>
0289                                LHS(zz) = 0;
0290                            <span class="keyword">end</span>
0291                        <span class="keyword">end</span>
0292                        [~,tlhs] = findpeaks(LHS,<span class="string">'MinPeakDistance'</span>,100);
0293                        LHS = zeros(length(LHS),1);
0294                        LHS(tlhs) = 1;
0295 <span class="comment">%                        keyboard</span>
0296                        <span class="comment">%%!!!!!!!!!!!!!!!!!!!!!!!%%!!!!!!!!!!!!!!!!!%%%!!!!!!!!!!!!!!!!</span>
0297                        <span class="comment">%calculate errors</span>
0298                        tamp = abs(Rgamma2(find(RHS)))'-this.Rtmtarget;
0299                        tamp2 = abs(Lgamma2(find(LHS)))'-this.Ltmtarget;
0300                        
0301 <span class="comment">%                        tamp(abs(tamp)&gt;0.15)=[];%remove spurios errors</span>
0302 <span class="comment">%                        tamp2(abs(tamp2)&gt;0.15)=[];</span>
0303                        
0304                        rhits{z} = tamp;
0305                        lhits{z} = tamp2;
0306                        
0307                        rlqr{z} = iqr(rhits{z});
0308                        llqr{z} = iqr(lhits{z});
0309                         clear RHS LHS tamp tamp2
0310                    <span class="keyword">end</span>
0311                    
0312                    this.saveit();
0313                    
0314                    waitbar(1,WB,<span class="string">'Processing complete...'</span>);
0315                    pause(0.5);
0316                    close(WB);
0317                    clear z
0318                    
0319                    <span class="comment">%load triallist to look for categories</span>
0320                    tlist = this.triallist;
0321                    
0322                    train = find(strcmp(tlist(:,4),<span class="string">'training'</span>));<span class="comment">%logicals of where training trials are</span>
0323                    base = find(strcmp(tlist(:,4),<span class="string">'baseline'</span>));
0324                    adapt = find(strcmp(tlist(:,4),<span class="string">'adaptation'</span>));
0325                    wash = find(strcmp(tlist(:,4),<span class="string">'washout'</span>));
0326                    
0327                    figure(2)
0328                    <span class="keyword">if</span> this.fastleg == <span class="string">'r'</span>
0329                        subplot(2,1,1)
0330                    <span class="keyword">else</span>
0331                        subplot(2,1,2)
0332                    <span class="keyword">end</span>
0333                    hold on
0334 <span class="comment">%                    keyboard</span>
0335                    fill([0 length(cell2mat(rhits(train)')) length(cell2mat(rhits(train)')) 0],[0.255 0.255 -0.255 -0.255],[230 230 230]./256);
0336                    fill([length(cell2mat(rhits(train)'))+length(cell2mat(rhits(base)')) length(cell2mat(rhits(train)'))+length(cell2mat(rhits(base)'))+length(cell2mat(rhits(adapt)')) length(cell2mat(rhits(train)'))+length(cell2mat(rhits(base)'))+length(cell2mat(rhits(adapt)')) length(cell2mat(rhits(train)'))+length(cell2mat(rhits(base)'))],[0.255 0.255 -0.255 -0.255],[230 230 230]./256);
0337                    
0338                    <span class="comment">%add baseline walking bars</span>
0339                    <span class="keyword">for</span> b=1:2:length(base)
0340                        fill([length(cell2mat(rhits(train)'))+length(cell2mat(rhits(base(1:b))'))-0.5 length(cell2mat(rhits(train)'))+length(cell2mat(rhits(base(1:b))'))+0.5 length(cell2mat(rhits(train)'))+length(cell2mat(rhits(base(1:b))'))+0.5 length(cell2mat(rhits(train)'))+length(cell2mat(rhits(base(1:b))'))-0.5],[0.1 0.1 -0.1 -0.1],[20 20 20]./256);
0341                        text(length(cell2mat(rhits(train)'))+length(cell2mat(rhits(base(1:b))')),0.125,<span class="string">'Base'</span>);
0342                    <span class="keyword">end</span>
0343                    
0344                    <span class="comment">%add adaptation walking bars</span>
0345                    <span class="keyword">for</span> a=1:2:length(adapt)
0346                        fill([length(cell2mat(rhits(train)'))+length(cell2mat(rhits(base)'))+length(cell2mat(rhits(adapt(1:a))'))-0.5 length(cell2mat(rhits(train)'))+length(cell2mat(rhits(base)'))+length(cell2mat(rhits(adapt(1:a))'))+0.5 length(cell2mat(rhits(train)'))+length(cell2mat(rhits(base)'))+length(cell2mat(rhits(adapt(1:a))'))+0.5 length(cell2mat(rhits(train)'))+length(cell2mat(rhits(base)'))+length(cell2mat(rhits(adapt(1:a))'))-0.5],[0.1 0.1 -0.1 -0.1],[20 20 20]./256);
0347                        text(length(cell2mat(rhits(train)'))+length(cell2mat(rhits(base)'))+length(cell2mat(rhits(adapt(1:a))')),0.125,<span class="string">'Split'</span>);
0348                    <span class="keyword">end</span>
0349                    
0350                    <span class="comment">%add washout walking bars</span>
0351                    <span class="keyword">for</span> w=1:2:length(wash)
0352                        fill([length(cell2mat(rhits(train)'))+length(cell2mat(rhits(base)'))+length(cell2mat(rhits(adapt)'))+length(cell2mat(rhits(wash(1:w))'))-0.5 length(cell2mat(rhits(train)'))+length(cell2mat(rhits(base)'))+length(cell2mat(rhits(adapt)'))+length(cell2mat(rhits(wash(1:w))'))+0.5 length(cell2mat(rhits(train)'))+length(cell2mat(rhits(base)'))+length(cell2mat(rhits(adapt)'))+length(cell2mat(rhits(wash(1:w))'))+0.5 length(cell2mat(rhits(train)'))+length(cell2mat(rhits(base)'))+length(cell2mat(rhits(adapt)'))+length(cell2mat(rhits(wash(1:w))'))-0.5],[0.1 0.1 -0.1 -0.1],[20 20 20]./256);
0353                        text(length(cell2mat(rhits(train)'))+length(cell2mat(rhits(base)'))+length(cell2mat(rhits(adapt)'))+length(cell2mat(rhits(wash(1:w))')),0.125,<span class="string">'Wash'</span>);
0354                    <span class="keyword">end</span>
0355                    
0356                    
0357                    h = 0;
0358                    <span class="keyword">for</span> z = 1:length(filename)
0359                        figure(2)
0360                        <span class="keyword">if</span> this.fastleg == <span class="string">'r'</span>
0361                            subplot(2,1,1)
0362                        <span class="keyword">else</span>
0363                            subplot(2,1,2)
0364                        <span class="keyword">end</span>
0365                        hold on
0366                        scatter([1:length(rhits{z})]+h,rhits{z},75,color{z},<span class="string">'fill'</span>);
0367                        plot([h h+length(rhits{z})],[0.0375 0.0375],<span class="string">'k'</span>);<span class="comment">%tolerance lines</span>
0368                        plot([h h+length(rhits{z})],[-0.0375 -0.0375],<span class="string">'k'</span>);
0369                        plot([h h+length(rhits{z})],[nanmean(rhits{z})+rlqr{z}/2 nanmean(rhits{z})+rlqr{z}/2],<span class="string">'Color'</span>,[0.5 0 0.5],<span class="string">'LineWidth'</span>,2);<span class="comment">%tolerance lines</span>
0370                        plot([h h+length(rhits{z})],[nanmean(rhits{z})-rlqr{z}/2 nanmean(rhits{z})-rlqr{z}/2],<span class="string">'Color'</span>,[0.5 0 0.5],<span class="string">'LineWidth'</span>,2);<span class="comment">%tolerance lines</span>
0371                        h = h+length(rhits{z});
0372                    <span class="keyword">end</span>
0373                    figure(2)
0374                    <span class="keyword">if</span> this.fastleg == <span class="string">'r'</span>
0375                        subplot(2,1,1)
0376                        title([this.subjectcode <span class="string">' Step Length Error Fast Leg'</span>]);
0377                    <span class="keyword">else</span>
0378                        subplot(2,1,2)
0379                        title([this.subjectcode <span class="string">' Step Length Error Slow Leg'</span>]);
0380                    <span class="keyword">end</span>
0381                    ylim([-0.15 0.15]);
0382                    xlim([0 h+10]);
0383 <span class="comment">%                    title([this.subjectcode ' Step Length Error Fast Leg']);</span>
0384                    xlabel(<span class="string">'step #'</span>);
0385                    ylabel(<span class="string">'Error (m)'</span>);
0386 
0387                    figure(2)
0388                    <span class="keyword">if</span> this.fastleg == <span class="string">'l'</span>
0389                        subplot(2,1,1)
0390                    <span class="keyword">else</span>
0391                        subplot(2,1,2)
0392                    <span class="keyword">end</span>
0393                    hold on
0394                    fill([0 length(cell2mat(lhits(train)')) length(cell2mat(lhits(train)')) 0],[0.255 0.255 -0.255 -0.255],[230 230 230]./256);
0395                    fill([length(cell2mat(lhits(train)'))+length(cell2mat(lhits(base)')) length(cell2mat(lhits(train)'))+length(cell2mat(lhits(base)'))+length(cell2mat(lhits(adapt)')) length(cell2mat(lhits(train)'))+length(cell2mat(lhits(base)'))+length(cell2mat(lhits(adapt)')) length(cell2mat(lhits(train)'))+length(cell2mat(lhits(base)'))],[0.255 0.255 -0.255 -0.255],[230 230 230]./256);
0396                    
0397                    <span class="comment">%add baseline walking bars</span>
0398                    <span class="keyword">for</span> b=1:2:length(base)
0399                        fill([length(cell2mat(lhits(train)'))+length(cell2mat(lhits(base(1:b))'))-0.5 length(cell2mat(lhits(train)'))+length(cell2mat(lhits(base(1:b))'))+0.5 length(cell2mat(lhits(train)'))+length(cell2mat(lhits(base(1:b))'))+0.5 length(cell2mat(lhits(train)'))+length(cell2mat(lhits(base(1:b))'))-0.5],[0.1 0.1 -0.1 -0.1],[20 20 20]./256);
0400                        text(length(cell2mat(lhits(train)'))+length(cell2mat(lhits(base(1:b))')),0.125,<span class="string">'Base'</span>);
0401                    <span class="keyword">end</span>
0402                    
0403                    <span class="comment">%add adaptation walking bars</span>
0404                    <span class="keyword">for</span> a=1:2:length(adapt)
0405                        fill([length(cell2mat(lhits(train)'))+length(cell2mat(lhits(base)'))+length(cell2mat(lhits(adapt(1:a))'))-0.5 length(cell2mat(lhits(train)'))+length(cell2mat(lhits(base)'))+length(cell2mat(lhits(adapt(1:a))'))+0.5 length(cell2mat(lhits(train)'))+length(cell2mat(lhits(base)'))+length(cell2mat(lhits(adapt(1:a))'))+0.5 length(cell2mat(lhits(train)'))+length(cell2mat(lhits(base)'))+length(cell2mat(lhits(adapt(1:a))'))-0.5],[0.1 0.1 -0.1 -0.1],[20 20 20]./256);
0406                        text(length(cell2mat(lhits(train)'))+length(cell2mat(lhits(base)'))+length(cell2mat(lhits(adapt(1:a))')),0.125,<span class="string">'Split'</span>);
0407                    <span class="keyword">end</span>
0408                    
0409                    <span class="comment">%add washout walking bars</span>
0410                    <span class="keyword">for</span> w=1:2:length(wash)
0411                        fill([length(cell2mat(lhits(train)'))+length(cell2mat(lhits(base)'))+length(cell2mat(lhits(adapt)'))+length(cell2mat(lhits(wash(1:w))'))-0.5 length(cell2mat(lhits(train)'))+length(cell2mat(lhits(base)'))+length(cell2mat(lhits(adapt)'))+length(cell2mat(lhits(wash(1:w))'))+0.5 length(cell2mat(lhits(train)'))+length(cell2mat(lhits(base)'))+length(cell2mat(lhits(adapt)'))+length(cell2mat(lhits(wash(1:w))'))+0.5 length(cell2mat(lhits(train)'))+length(cell2mat(lhits(base)'))+length(cell2mat(lhits(adapt)'))+length(cell2mat(lhits(wash(1:w))'))-0.5],[0.1 0.1 -0.1 -0.1],[20 20 20]./256);
0412                        text(length(cell2mat(lhits(train)'))+length(cell2mat(lhits(base)'))+length(cell2mat(lhits(adapt)'))+length(cell2mat(lhits(wash(1:w))')),0.125,<span class="string">'Wash'</span>);
0413                    <span class="keyword">end</span>
0414                    
0415                    h = 0;
0416                    <span class="keyword">for</span> z = 1:length(filename)
0417                        figure(2)
0418                        <span class="keyword">if</span> this.fastleg == <span class="string">'l'</span>
0419                            subplot(2,1,1)
0420                        <span class="keyword">else</span>
0421                            subplot(2,1,2)
0422                        <span class="keyword">end</span>
0423                        scatter([1:length(lhits{z})]+h,lhits{z},75,color{z},<span class="string">'fill'</span>);
0424                        plot([h h+length(lhits{z})],[0.0375 0.0375],<span class="string">'k'</span>);<span class="comment">%tolerance lines</span>
0425                        plot([h h+length(lhits{z})],[-0.0375 -0.0375],<span class="string">'k'</span>);
0426                        plot([h h+length(lhits{z})],[nanmean(lhits{z})+llqr{z}/2 nanmean(lhits{z})+llqr{z}/2],<span class="string">'Color'</span>,[0.5 0 0.5],<span class="string">'LineWidth'</span>,2);<span class="comment">%tolerance lines</span>
0427                        plot([h h+length(lhits{z})],[nanmean(lhits{z})-llqr{z}/2 nanmean(lhits{z})-llqr{z}/2],<span class="string">'Color'</span>,[0.5 0 0.5],<span class="string">'LineWidth'</span>,2);<span class="comment">%tolerance lines</span>
0428                        h = h+length(lhits{z});
0429                        <span class="comment">%         h = h+length(lhits{z});</span>
0430                    <span class="keyword">end</span>
0431                    figure(2)
0432                    <span class="keyword">if</span> this.fastleg == <span class="string">'l'</span>
0433                        subplot(2,1,1)
0434                        title([this.subjectcode <span class="string">' Step Length Error Fast Leg'</span>]);
0435                    <span class="keyword">else</span>
0436                        subplot(2,1,2)
0437                        title([this.subjectcode <span class="string">' Step Length Error Slow Leg'</span>]);
0438                    <span class="keyword">end</span>
0439                    ylim([-0.15 0.15]);
0440                    xlim([0 h+10]);
0441 <span class="comment">%                    title([this.subjectcode ' Step Length Error Slow Leg']);</span>
0442                    xlabel(<span class="string">'step #'</span>);
0443                    ylabel(<span class="string">'Error (m)'</span>);
0444                    
0445                    
0446 <span class="comment">%                     keyboard</span>
0447                    <span class="keyword">for</span> z=1:length(rhits)
0448                        temp = rhits{z};
0449                        temp(abs(temp) &gt; 0.1) = [];
0450                        meanrhits1(z) = mean(temp);
0451                        stdrhits1(z) = std(temp);
0452 <span class="comment">%                        keyboard</span>
0453                        rscore(z) = length(temp(abs(temp)&lt;0.0375))/length(temp);
0454 <span class="comment">%                        meanrhits2(z) = mean(temp(end-2:end));</span>
0455 <span class="comment">%                        stdrhits2(z) = std(temp(end-2:end));</span>
0456                    <span class="keyword">end</span>
0457                    <span class="keyword">for</span> z=1:length(lhits)
0458                        temp = lhits{z};
0459                        temp(abs(temp) &gt; 0.1) = [];
0460                        meanlhits1(z) = mean(temp);
0461                        stdlhits1(z) = std(temp);
0462                        lscore(z) = length(temp(abs(temp)&lt;0.0375))/length(temp);
0463 <span class="comment">%                        meanlhits2(z) = mean(temp(end-2:end));</span>
0464 <span class="comment">%                        stdlhits2(z) = std(temp(end-2:end));</span>
0465                    <span class="keyword">end</span>
0466                    
0467                    figure(5)
0468                    <span class="keyword">if</span> this.fastleg == <span class="string">'r'</span>
0469                        subplot(2,1,1)
0470                    <span class="keyword">else</span>
0471                        subplot(2,1,2)
0472                    <span class="keyword">end</span>
0473                    hold on
0474                    fill([0 length(train)+0.5 length(train)+0.5 0],[0.255 0.255 -0.255 -0.255],[230 230 230]./256);
0475                    fill([length(train)+0.5+length(base) length(train)+length(base)+length(adapt)+0.5 length(train)+length(base)+length(adapt)+0.5 length(train)+0.5+length(base)],[0.255 0.255 -0.255 -0.255],[230 230 230]./256);
0476                    
0477                    <span class="comment">%add baseline bars</span>
0478                    <span class="keyword">for</span> b=1:2:length(base)
0479                        fill([length(train)+length(base(1:b))+0.45 length(train)+length(base(1:b))+0.55 length(train)+length(base(1:b))+0.55 length(train)+length(base(1:b))+0.45],[0.1 0.1 -0.1 -0.1],[20 20 20]./256);
0480                        text(length(train)+length(base(1:b))+0.45,0.125,<span class="string">'Base'</span>);
0481                    <span class="keyword">end</span>
0482                    
0483                    <span class="comment">%add adaptation bars</span>
0484                    <span class="keyword">for</span> a=1:2:length(adapt)
0485                        fill([length(train)+length(base)+length(adapt(1:a))+0.45 length(train)+length(base)+length(adapt(1:a))+0.55 length(train)+length(base)+length(adapt(1:a))+0.55 length(train)+length(base)+length(adapt(1:a))+0.45],[0.1 0.1 -0.1 -0.1],[20 20 20]./256);
0486                        text(length(train)+length(base)+length(adapt(1:a))+0.45,0.125,<span class="string">'Split'</span>);
0487                    <span class="keyword">end</span>
0488                    
0489                    <span class="comment">%add washout bars</span>
0490                    <span class="keyword">for</span> w=1:2:length(wash)
0491                        fill([length(train)+length(base)+length(adapt)+length(wash(1:w))+0.45 length(train)+length(base)+length(adapt)+length(wash(1:w))+0.55 length(train)+length(base)+length(adapt)+length(wash(1:w))+0.55 length(train)+length(base)+length(adapt)+length(wash(1:w))+0.45],[0.1 0.1 -0.1 -0.1],[20 20 20]./256);
0492                        text(length(train)+length(base)+length(adapt)+length(wash(1:w))+0.45,0.125,<span class="string">'Wash'</span>);
0493                    <span class="keyword">end</span>
0494                    
0495                    h = 1:1:length(meanrhits1);
0496 <span class="comment">%                    h2 = 2:2:2*length(meanrhits2);</span>
0497                    errorbar(h,meanrhits1,stdrhits1,<span class="string">'k'</span>,<span class="string">'LineWidth'</span>,1.5);
0498 <span class="comment">%                    errorbar(h2,meanrhits2,stdrhits2,'k','LineWidth',1.5);</span>
0499                    plot([0 length(meanrhits1)+1],[0.0375 0.0375],<span class="string">'--k'</span>,<span class="string">'LineWidth'</span>,2);<span class="comment">%tolerance lines</span>
0500                    plot([0 length(meanrhits1)+1],[-0.0375 -0.0375],<span class="string">'--k'</span>,<span class="string">'LineWidth'</span>,2);
0501                    <span class="comment">%     plot([0 2*length(meanrhits1)+1],[nanmean(rhits{z})+rlqr{z} nanmean(rhits{z})+rlqr{z}]</span>
0502                    <span class="keyword">for</span> z = 1:length(h)
0503                        figure(5)
0504                        <span class="keyword">if</span> this.fastleg == <span class="string">'r'</span>
0505                            subplot(2,1,1)
0506                            title([this.subjectcode <span class="string">' Fast Leg Errors'</span>]);
0507                        <span class="keyword">else</span>
0508                            subplot(2,1,2)
0509                            title([this.subjectcode <span class="string">' Slow Leg Errors'</span>]);
0510                        <span class="keyword">end</span>
0511                        bar(h(z),meanrhits1(z),0.5,<span class="string">'FaceColor'</span>,color{z});<span class="comment">%color2(z,:));</span>
0512                    <span class="keyword">end</span>
0513                    ylim([-0.15 0.15]);
0514                    xlim([0 length(meanrhits1)+0.5]);
0515 <span class="comment">%                    title([this.subjectcode ' Fast Leg Errors']);</span>
0516                    ylabel(<span class="string">'Error (m)'</span>);
0517                    
0518                    
0519                    figure(5)
0520                    <span class="keyword">if</span> this.fastleg == <span class="string">'l'</span>
0521                        subplot(2,1,1)
0522                    <span class="keyword">else</span>
0523                        subplot(2,1,2)
0524                    <span class="keyword">end</span>
0525                    hold on
0526                    fill([0 length(train)+0.5 length(train)+0.5 0],[0.255 0.255 -0.255 -0.255],[230 230 230]./256);
0527                    fill([length(train)+0.5+length(base) length(train)+length(base)+length(adapt)+0.5 length(train)+length(base)+length(adapt)+0.5 length(train)+0.5+length(base)],[0.255 0.255 -0.255 -0.255],[230 230 230]./256);
0528                    
0529                    <span class="comment">%add baseline bars</span>
0530                    <span class="keyword">for</span> b=1:2:length(base)
0531                        fill([length(train)+length(base(1:b))+0.45 length(train)+length(base(1:b))+0.55 length(train)+length(base(1:b))+0.55 length(train)+length(base(1:b))+0.45],[0.1 0.1 -0.1 -0.1],[20 20 20]./256);
0532                        text(length(train)+length(base(1:b))+0.45,0.125,<span class="string">'Base'</span>);
0533                    <span class="keyword">end</span>
0534                    
0535                    <span class="comment">%add adaptation bars</span>
0536                    <span class="keyword">for</span> a=1:2:length(adapt)
0537                        fill([length(train)+length(base)+length(adapt(1:a))+0.45 length(train)+length(base)+length(adapt(1:a))+0.55 length(train)+length(base)+length(adapt(1:a))+0.55 length(train)+length(base)+length(adapt(1:a))+0.45],[0.1 0.1 -0.1 -0.1],[20 20 20]./256);
0538                        text(length(train)+length(base)+length(adapt(1:a))+0.45,0.125,<span class="string">'Split'</span>);
0539                    <span class="keyword">end</span>
0540                    
0541                    <span class="comment">%add washout bars</span>
0542                    <span class="keyword">for</span> w=1:2:length(wash)
0543                        fill([length(train)+length(base)+length(adapt)+length(wash(1:w))+0.45 length(train)+length(base)+length(adapt)+length(wash(1:w))+0.55 length(train)+length(base)+length(adapt)+length(wash(1:w))+0.55 length(train)+length(base)+length(adapt)+length(wash(1:w))+0.45],[0.1 0.1 -0.1 -0.1],[20 20 20]./256);
0544                        text(length(train)+length(base)+length(adapt)+length(wash(1:w))+0.45,0.125,<span class="string">'Wash'</span>);
0545                    <span class="keyword">end</span>
0546                    
0547                    h = 1:1:length(meanlhits1);
0548 <span class="comment">%                    h2 = 2:2:2*length(meanlhits2);</span>
0549                    errorbar(h,meanlhits1,stdlhits1,<span class="string">'k'</span>,<span class="string">'LineWidth'</span>,1.5);
0550 <span class="comment">%                    errorbar(h2,meanlhits2,stdlhits2,'k','LineWidth',1.5);</span>
0551                    plot([0 length(meanlhits1)+1],[0.0375 0.0375],<span class="string">'--k'</span>,<span class="string">'LineWidth'</span>,2);<span class="comment">%tolerance lines</span>
0552                    plot([0 length(meanlhits1)+1],[-0.0375 -0.0375],<span class="string">'--k'</span>,<span class="string">'LineWidth'</span>,2);
0553                    <span class="keyword">for</span> z = 1:length(h)
0554                        figure(5)
0555                        <span class="keyword">if</span> this.fastleg == <span class="string">'l'</span>
0556                            subplot(2,1,1)
0557                            title([this.subjectcode <span class="string">' Fast Leg Errors'</span>])
0558                        <span class="keyword">else</span>
0559                            subplot(2,1,2)
0560                            title([this.subjectcode <span class="string">' Slow Leg Errors'</span>])
0561                        <span class="keyword">end</span>
0562                        bar(h(z),meanlhits1(z),0.5,<span class="string">'FaceColor'</span>,color{z});
0563                    <span class="keyword">end</span>
0564                    ylim([-0.15 0.15]);
0565                    xlim([0 length(meanrhits1)+0.5]);
0566 <span class="comment">%                    title([this.subjectcode ' Slow Leg Errors'])</span>
0567                    ylabel(<span class="string">'Error (m)'</span>);
0568                    
0569                    
0570                    
0571                    
0572                    figure(6)<span class="comment">%plot of mean squared errors</span>
0573                    <span class="keyword">if</span> this.fastleg == <span class="string">'r'</span>
0574                        subplot(2,1,1)
0575                    <span class="keyword">else</span>
0576                        subplot(2,1,2)
0577                    <span class="keyword">end</span>
0578                    hold on
0579                    fill([0 length(train)+0.5 length(train)+0.5 0],[0.255 0.255 -0.255 -0.255],[230 230 230]./256);
0580                    fill([length(train)+0.5+length(base) length(train)+length(base)+length(adapt)+0.5 length(train)+length(base)+length(adapt)+0.5 length(train)+0.5+length(base)],[0.255 0.255 -0.255 -0.255],[230 230 230]./256);
0581                    
0582                    <span class="comment">%add baseline bars</span>
0583                    <span class="keyword">for</span> b=1:2:length(base)
0584                        fill([length(train)+length(base(1:b))+0.45 length(train)+length(base(1:b))+0.55 length(train)+length(base(1:b))+0.55 length(train)+length(base(1:b))+0.45],[0.1 0.1 -0.1 -0.1],[20 20 20]./256);
0585                        text(length(train)+length(base(1:b))+0.45,max(meanrhits1.^2)+0.05*max(meanrhits1.^2),<span class="string">'Base'</span>);
0586                    <span class="keyword">end</span>
0587                    
0588                    <span class="comment">%add adaptation bars</span>
0589                    <span class="keyword">for</span> a=1:2:length(adapt)
0590                        fill([length(train)+length(base)+length(adapt(1:a))+0.45 length(train)+length(base)+length(adapt(1:a))+0.55 length(train)+length(base)+length(adapt(1:a))+0.55 length(train)+length(base)+length(adapt(1:a))+0.45],[0.1 0.1 -0.1 -0.1],[20 20 20]./256);
0591                        text(length(train)+length(base)+length(adapt(1:a))+0.45,max(meanrhits1.^2)+0.1*max(meanrhits1.^2),<span class="string">'Split'</span>);
0592                    <span class="keyword">end</span>
0593                    
0594                    <span class="comment">%add washout bars</span>
0595                    <span class="keyword">for</span> w=1:2:length(wash)
0596                        fill([length(train)+length(base)+length(adapt)+length(wash(1:w))+0.45 length(train)+length(base)+length(adapt)+length(wash(1:w))+0.55 length(train)+length(base)+length(adapt)+length(wash(1:w))+0.55 length(train)+length(base)+length(adapt)+length(wash(1:w))+0.45],[0.1 0.1 -0.1 -0.1],[20 20 20]./256);
0597                        text(length(train)+length(base)+length(adapt)+length(wash(1:w))+0.45,max(meanrhits1.^2)+0.1*max(meanrhits1.^2),<span class="string">'Wash'</span>);
0598                    <span class="keyword">end</span>
0599                    
0600                    h = 1:1:length(meanrhits1);
0601                    plot([0 length(meanrhits1)+1],[0.0375 0.0375],<span class="string">'--k'</span>,<span class="string">'LineWidth'</span>,2);<span class="comment">%tolerance lines</span>
0602 <span class="comment">%                    plot([0 length(meanrhits1)+1],[-0.0375 -0.0375],'--k','LineWidth',2);</span>
0603                    <span class="comment">%     plot([0 2*length(meanrhits1)+1],[nanmean(rhits{z})+rlqr{z} nanmean(rhits{z})+rlqr{z}]</span>
0604                    <span class="keyword">for</span> z = 1:length(h)
0605                        figure(6)
0606                        <span class="keyword">if</span> this.fastleg == <span class="string">'r'</span>
0607                            subplot(2,1,1)
0608                            title([this.subjectcode <span class="string">' Fast Leg Errors'</span>]);
0609                        <span class="keyword">else</span>
0610                            subplot(2,1,2)
0611                            title([this.subjectcode <span class="string">' Slow Leg Errors'</span>]);
0612                        <span class="keyword">end</span>
0613                        bar(h(z),meanrhits1(z).^2,0.5,<span class="string">'FaceColor'</span>,color{z});<span class="comment">%color2(z,:));</span>
0614                    <span class="keyword">end</span>
0615                    ylim([0 max(meanrhits1.^2)+0.1*max(meanrhits1.^2)]);
0616                    xlim([0 length(meanrhits1)+0.5]);
0617                    title([this.subjectcode <span class="string">' Fast Leg Errors'</span>]);
0618                    ylabel(<span class="string">'Error (m)'</span>);
0619                    
0620                    figure(6)
0621                    <span class="keyword">if</span> this.fastleg == <span class="string">'l'</span>
0622                        subplot(2,1,1)
0623                    <span class="keyword">else</span>
0624                        subplot(2,1,2)
0625                    <span class="keyword">end</span>
0626                    hold on
0627                    fill([0 length(train)+0.5 length(train)+0.5 0],[0.255 0.255 -0.255 -0.255],[230 230 230]./256);
0628                    fill([length(train)+0.5+length(base) length(train)+length(base)+length(adapt)+0.5 length(train)+length(base)+length(adapt)+0.5 length(train)+0.5+length(base)],[0.255 0.255 -0.255 -0.255],[230 230 230]./256);
0629                    
0630                    <span class="comment">%add baseline bars</span>
0631                    <span class="keyword">for</span> b=1:2:length(base)
0632                        fill([length(train)+length(base(1:b))+0.45 length(train)+length(base(1:b))+0.55 length(train)+length(base(1:b))+0.55 length(train)+length(base(1:b))+0.45],[0.1 0.1 -0.1 -0.1],[20 20 20]./256);
0633                        text(length(train)+length(base(1:b))+0.45,max(meanlhits1.^2)+0.05*max(meanlhits1.^2),<span class="string">'Base'</span>);
0634                    <span class="keyword">end</span>
0635                    
0636                    <span class="comment">%add adaptation bars</span>
0637                    <span class="keyword">for</span> a=1:2:length(adapt)
0638                        fill([length(train)+length(base)+length(adapt(1:a))+0.45 length(train)+length(base)+length(adapt(1:a))+0.55 length(train)+length(base)+length(adapt(1:a))+0.55 length(train)+length(base)+length(adapt(1:a))+0.45],[0.1 0.1 -0.1 -0.1],[20 20 20]./256);
0639                        text(length(train)+length(base)+length(adapt(1:a))+0.45,max(meanlhits1.^2)+0.05*max(meanlhits1.^2),<span class="string">'Split'</span>);
0640                    <span class="keyword">end</span>
0641                    
0642                    <span class="comment">%add washout bars</span>
0643                    <span class="keyword">for</span> w=1:2:length(wash)
0644                        fill([length(train)+length(base)+length(adapt)+length(wash(1:w))+0.45 length(train)+length(base)+length(adapt)+length(wash(1:w))+0.55 length(train)+length(base)+length(adapt)+length(wash(1:w))+0.55 length(train)+length(base)+length(adapt)+length(wash(1:w))+0.45],[0.1 0.1 -0.1 -0.1],[20 20 20]./256);
0645                        text(length(train)+length(base)+length(adapt)+length(wash(1:w))+0.45,max(meanlhits1.^2)+0.05*max(meanlhits1.^2),<span class="string">'Wash'</span>);
0646                    <span class="keyword">end</span>
0647                    
0648                    h = 1:1:length(meanlhits1);
0649                    plot([0 length(meanlhits1)+1],[0.0375 0.0375],<span class="string">'--k'</span>,<span class="string">'LineWidth'</span>,2);<span class="comment">%tolerance lines</span>
0650 <span class="comment">%                    plot([0 length(meanlhits1)+1],[-0.0375 -0.0375],'--k','LineWidth',2);</span>
0651                    <span class="keyword">for</span> z = 1:length(h)
0652                        figure(6)
0653                        <span class="keyword">if</span> this.fastleg == <span class="string">'l'</span>
0654                            subplot(2,1,1)
0655                            title([this.subjectcode <span class="string">' Fast Leg Errors'</span>])
0656                        <span class="keyword">else</span>
0657                            subplot(2,1,2)
0658                            title([this.subjectcode <span class="string">' Slow Leg Errors'</span>])
0659                        <span class="keyword">end</span>
0660                        bar(h(z),meanlhits1(z).^2,0.5,<span class="string">'FaceColor'</span>,color{z});
0661                    <span class="keyword">end</span>
0662                    ylim([0 max(meanlhits1.^2)+0.1*max(meanlhits1.^2)]);
0663                    xlim([0 length(meanrhits1)+0.5]);
0664 <span class="comment">%                    title([this.subjectcode ' Slow Leg Errors'])</span>
0665                    ylabel(<span class="string">'Error (m)'</span>);
0666                    
0667                    
0668                    figure(7)
0669                    <span class="keyword">if</span> this.fastleg == <span class="string">'r'</span>
0670                        subplot(2,1,1)
0671                        title([this.subjectcode <span class="string">' Fast Leg Accuracy'</span>])
0672                    <span class="keyword">else</span>
0673                        subplot(2,1,2)
0674                        title([this.subjectcode <span class="string">' Slow Leg Accuracy'</span>])
0675                    <span class="keyword">end</span>
0676                    hold on
0677                    fill([0 length(train)+0.5 length(train)+0.5 0],[120 120 0 0],[230 230 230]./256);
0678                    fill([length(train)+0.5+length(base) length(train)+length(base)+length(adapt)+0.5 length(train)+length(base)+length(adapt)+0.5 length(train)+0.5+length(base)],[120 120 0 0],[230 230 230]./256);
0679                    <span class="comment">%add baseline bars</span>
0680                    <span class="keyword">for</span> b=1:2:length(base)
0681                        fill([length(train)+length(base(1:b))+0.45 length(train)+length(base(1:b))+0.55 length(train)+length(base(1:b))+0.55 length(train)+length(base(1:b))+0.45],[100 100 0 0],[20 20 20]./256);
0682                        text(length(train)+length(base(1:b))+0.45,105,<span class="string">'Base'</span>);
0683                    <span class="keyword">end</span>
0684                    <span class="comment">%add adaptation bars</span>
0685                    <span class="keyword">for</span> a=1:2:length(adapt)
0686                        fill([length(train)+length(base)+length(adapt(1:a))+0.45 length(train)+length(base)+length(adapt(1:a))+0.55 length(train)+length(base)+length(adapt(1:a))+0.55 length(train)+length(base)+length(adapt(1:a))+0.45],[100 100 0 0],[20 20 20]./256);
0687                        text(length(train)+length(base)+length(adapt(1:a))+0.45,105,<span class="string">'Split'</span>);
0688                    <span class="keyword">end</span>
0689                    <span class="comment">%add washout bars</span>
0690                    <span class="keyword">for</span> w=1:2:length(wash)
0691                        fill([length(train)+length(base)+length(adapt)+length(wash(1:w))+0.45 length(train)+length(base)+length(adapt)+length(wash(1:w))+0.55 length(train)+length(base)+length(adapt)+length(wash(1:w))+0.55 length(train)+length(base)+length(adapt)+length(wash(1:w))+0.45],[100 100 0 0],[20 20 20]./256);
0692                        text(length(train)+length(base)+length(adapt)+length(wash(1:w))+0.45,105,<span class="string">'Wash'</span>);
0693                    <span class="keyword">end</span>
0694                    plot([0 length(meanrhits1)+1],[80 80],<span class="string">'--k'</span>,<span class="string">'LineWidth'</span>,2);<span class="comment">%tolerance lines</span>
0695                    plot([0 length(meanrhits1)+1],[100 100],<span class="string">'k'</span>,<span class="string">'LineWidth'</span>,1);<span class="comment">%tolerance lines</span>
0696                    <span class="keyword">for</span> z=1:length(rscore)
0697                        bar(z,rscore(z)*100,0.5,<span class="string">'FaceColor'</span>,color{z});
0698                    <span class="keyword">end</span>
0699                    ylim([0 110]);
0700                    ylabel(<span class="string">'Accuracy (%)'</span>)
0701 <span class="comment">%                    title([this.subjectcode ' Fast Leg Accuracy'])</span>
0702                    
0703                    <span class="keyword">if</span> this.fastleg == <span class="string">'l'</span>
0704                        subplot(2,1,1)
0705                        title([this.subjectcode <span class="string">' Fast Leg Accuracy'</span>])
0706                    <span class="keyword">else</span>
0707                        subplot(2,1,2)
0708                        title([this.subjectcode <span class="string">' Slow Leg Accuracy'</span>])
0709                    <span class="keyword">end</span>
0710                    hold on
0711                    fill([0 length(train)+0.5 length(train)+0.5 0],[120 120 0 0],[230 230 230]./256);
0712                    fill([length(train)+0.5+length(base) length(train)+length(base)+length(adapt)+0.5 length(train)+length(base)+length(adapt)+0.5 length(train)+0.5+length(base)],[120 120 0 0],[230 230 230]./256);
0713                    <span class="comment">%add baseline bars</span>
0714                    <span class="keyword">for</span> b=1:2:length(base)
0715                        fill([length(train)+length(base(1:b))+0.45 length(train)+length(base(1:b))+0.55 length(train)+length(base(1:b))+0.55 length(train)+length(base(1:b))+0.45],[100 100 0 0],[20 20 20]./256);
0716                        text(length(train)+length(base(1:b))+0.45,105,<span class="string">'Base'</span>);
0717                    <span class="keyword">end</span>
0718                    <span class="comment">%add adaptation bars</span>
0719                    <span class="keyword">for</span> a=1:2:length(adapt)
0720                        fill([length(train)+length(base)+length(adapt(1:a))+0.45 length(train)+length(base)+length(adapt(1:a))+0.55 length(train)+length(base)+length(adapt(1:a))+0.55 length(train)+length(base)+length(adapt(1:a))+0.45],[100 100 0 0],[20 20 20]./256);
0721                        text(length(train)+length(base)+length(adapt(1:a))+0.45,105,<span class="string">'Split'</span>);
0722                    <span class="keyword">end</span>
0723                    <span class="comment">%add washout bars</span>
0724                    <span class="keyword">for</span> w=1:2:length(wash)
0725                        fill([length(train)+length(base)+length(adapt)+length(wash(1:w))+0.45 length(train)+length(base)+length(adapt)+length(wash(1:w))+0.55 length(train)+length(base)+length(adapt)+length(wash(1:w))+0.55 length(train)+length(base)+length(adapt)+length(wash(1:w))+0.45],[100 100 0 0],[20 20 20]./256);
0726                        text(length(train)+length(base)+length(adapt)+length(wash(1:w))+0.45,105,<span class="string">'Wash'</span>);
0727                    <span class="keyword">end</span>
0728                    plot([0 length(meanlhits1)+1],[80 80],<span class="string">'--k'</span>,<span class="string">'LineWidth'</span>,2);<span class="comment">%tolerance lines</span>
0729                    plot([0 length(meanlhits1)+1],[100 100],<span class="string">'k'</span>,<span class="string">'LineWidth'</span>,1);<span class="comment">%tolerance lines</span>
0730                    <span class="keyword">for</span> z=1:length(lscore)
0731                        bar(z,lscore(z)*100,0.5,<span class="string">'FaceColor'</span>,color{z});
0732                    <span class="keyword">end</span>
0733                    ylim([0 110]);
0734                    ylabel(<span class="string">'Accuracy (%)'</span>)
0735 <span class="comment">%                    title([this.subjectcode ' Slow Leg Accuracy'])</span>
0736                    
0737                <span class="keyword">end</span>
0738             <span class="keyword">end</span>
0739         <span class="keyword">end</span>
0740         
0741         <a name="_sub2" href="#_subfunctions" class="code">function []=editTriallist(this)</a>
0742             <span class="keyword">global</span> t
0743             <span class="keyword">global</span> ID
0744             ID = this.subjectcode;
0745 
0746             <span class="keyword">if</span> isempty(this.triallist)<span class="comment">%if triallist is empty, start from scratch</span>
0747                 [filenames,~] = uigetfiles(<span class="string">'*.*'</span>,<span class="string">'Select filenames'</span>);
0748                 this.data = cell(length(filenames),1);
0749                 <span class="keyword">if</span> iscell(filenames)
0750                     f = figure;
0751                     data = cell(length(filenames),4);
0752                     data(:,1)=filenames;
0753                     
0754                     <span class="keyword">for</span> z=1:length(filenames)<span class="comment">%autodetect if a trial was a train for evaluation</span>
0755                         tname = filenames{z};
0756                         <span class="keyword">if</span> strcmp(tname(end-5:end-4),<span class="string">'V3'</span>)
0757                             data{z,3} = <span class="string">'train'</span>;
0758                         <span class="keyword">else</span>
0759                             data{z,3} = <span class="string">'eval'</span>;
0760                         <span class="keyword">end</span>
0761                     <span class="keyword">end</span>
0762                     
0763                     colnames = {<span class="string">'Filename'</span>,<span class="string">'#'</span>,<span class="string">'type'</span>,<span class="string">'category'</span>};
0764                     columnformat = {<span class="string">'char'</span>,<span class="string">'numeric'</span>,{<span class="string">'train'</span>,<span class="string">'eval'</span>},{<span class="string">'training'</span>,<span class="string">'baseline'</span>,<span class="string">'adaptation'</span>,<span class="string">'washout'</span>}};
0765                     t=uitable(f,<span class="string">'Position'</span>,[10,10,375,375],<span class="string">'Data'</span>,data,<span class="string">'ColumnName'</span>,colnames,<span class="string">'ColumnFormat'</span>,columnformat,<span class="string">'ColumnEditable'</span>,[true true true true]);
0766                     set(t,<span class="string">'celleditcallback'</span>,<span class="string">'global ID;global t;temp = get(t,''Data'');eval([ID ''.triallist = temp;'']);'</span>);
0767                     set(t,<span class="string">'DeleteFcn'</span>,<span class="string">'global ID;eval([ID ''.saveit()'']);'</span>);
0768                 <span class="keyword">else</span>
0769                     f = figure;
0770                     data = cell(1,4);
0771                     data(1,1) = filenames;
0772                     <span class="keyword">if</span> strcmp(filenames(end-5:end-4),<span class="string">'V3'</span>)
0773                         data(1,3) = <span class="string">'train'</span>;
0774                     <span class="keyword">else</span>
0775                         data(1,3) = <span class="string">'eval'</span>;
0776                     <span class="keyword">end</span>
0777                     colnames = {<span class="string">'Filename'</span>,<span class="string">'#'</span>,<span class="string">'type'</span>,<span class="string">'category'</span>};
0778                     columnformat = {<span class="string">'char'</span>,<span class="string">'numeric'</span>,{<span class="string">'train'</span>,<span class="string">'eval'</span>},{<span class="string">'training'</span>,<span class="string">'baseline'</span>,<span class="string">'adaptation'</span>,<span class="string">'washout'</span>}};
0779                     t=uitable(f,<span class="string">'Position'</span>,[10,10,375,375],<span class="string">'Data'</span>,data,<span class="string">'ColumnName'</span>,colnames,<span class="string">'ColumnFormat'</span>,columnformat,<span class="string">'ColumnEditable'</span>,[true true true true]);
0780                     set(t,<span class="string">'celleditcallback'</span>,<span class="string">'global ID;global t;temp = get(t,''Data'');eval([ID ''.triallist = temp;'']);'</span>);
0781                     set(t,<span class="string">'DeleteFcn'</span>,<span class="string">'global ID;eval([ID ''.saveit()'']);'</span>);
0782                 <span class="keyword">end</span>
0783                 
0784             <span class="keyword">else</span> <span class="comment">%if triallist is already populated, just edit what is already there</span>
0785                 [filenames,~] = uigetfiles(<span class="string">'*.*'</span>,<span class="string">'Select filenames'</span>);
0786                 this.data = cell(length(filenames),1);
0787                 <span class="keyword">if</span> iscell(filenames)
0788                     f = figure;
0789                     data = cell(length(filenames),4);
0790                     data(:,1)=filenames;
0791                     data(:,2:4) = this.triallist(:,2:4);
0792                     colnames = {<span class="string">'Filename'</span>,<span class="string">'#'</span>,<span class="string">'type'</span>,<span class="string">'category'</span>};
0793                     columnformat = {<span class="string">'char'</span>,<span class="string">'numeric'</span>,{<span class="string">'train'</span>,<span class="string">'eval'</span>},{<span class="string">'training'</span>,<span class="string">'baseline'</span>,<span class="string">'adaptation'</span>,<span class="string">'washout'</span>}};
0794                     t=uitable(f,<span class="string">'Position'</span>,[10,10,375,375],<span class="string">'Data'</span>,data,<span class="string">'ColumnName'</span>,colnames,<span class="string">'ColumnFormat'</span>,columnformat,<span class="string">'ColumnEditable'</span>,[true true true true]);
0795                     set(t,<span class="string">'celleditcallback'</span>,<span class="string">'global ID;global t;temp = get(t,''Data'');eval([ID ''.triallist = temp;'']);'</span>);
0796                     set(t,<span class="string">'DeleteFcn'</span>,<span class="string">'global ID;eval([ID ''.saveit()'']);'</span>);
0797                 <span class="keyword">else</span>
0798                     f = figure;
0799                     data = cell(1,4);
0800                     data(1,1) = filenames;
0801                     data(1,2:4) = this.triallist(1,2:4);
0802                     colnames = {<span class="string">'Filename'</span>,<span class="string">'#'</span>,<span class="string">'type'</span>,<span class="string">'category'</span>};
0803                     columnformat = {<span class="string">'char'</span>,<span class="string">'numeric'</span>,{<span class="string">'train'</span>,<span class="string">'eval'</span>},{<span class="string">'training'</span>,<span class="string">'baseline'</span>,<span class="string">'adaptation'</span>,<span class="string">'washout'</span>}};
0804                     t=uitable(f,<span class="string">'Position'</span>,[10,10,375,375],<span class="string">'Data'</span>,data,<span class="string">'ColumnName'</span>,colnames,<span class="string">'ColumnFormat'</span>,columnformat,<span class="string">'ColumnEditable'</span>,[true true true true]);
0805                     set(t,<span class="string">'celleditcallback'</span>,<span class="string">'global ID;global t;temp = get(t,''Data'');eval([ID ''.triallist = temp;'']);'</span>);
0806                     set(t,<span class="string">'DeleteFcn'</span>,<span class="string">'global ID;eval([ID ''.saveit()'']);'</span>);
0807                 <span class="keyword">end</span>
0808                 
0809             <span class="keyword">end</span>
0810         <span class="keyword">end</span>
0811         
0812         <a name="_sub3" href="#_subfunctions" class="code">function []=saveit(this)</a><span class="comment">%save instance as the &quot;subjectcode_SLBF&quot;</span>
0813             
0814             <span class="keyword">if</span> isempty(this.subjectcode)
0815                 cprintf(<span class="string">'err'</span>,<span class="string">'WARNING: save failed, no valid ID present'</span>);
0816             <span class="keyword">else</span>
0817                 savename = [this.subjectcode <span class="string">'_SLBF_day'</span> num2str(this.day) <span class="string">'.mat'</span>];
0818                 eval([this.subjectcode <span class="string">'=this;'</span>]);
0819                 save(savename,this.subjectcode);
0820             <span class="keyword">end</span>
0821         <span class="keyword">end</span>
0822         
0823         <a name="_sub4" href="#_subfunctions" class="code">function []=comparedays(this,flag)</a>
0824             <span class="comment">%make bar plots of day1 and day2 means to compare performances</span>
0825             <span class="comment">%no inputs required, data is located from a uitable</span>
0826             <span class="comment">%</span>
0827             <span class="comment">%creates figures of bar plots for fast and slow legs, day 1 and</span>
0828             <span class="comment">%day 2</span>
0829             <span class="comment">%</span>
0830             <span class="comment">%flag indicates whether to normalize data by last training</span>
0831             <span class="comment">%phase evaluation, 0 for no, 1 for yes</span>
0832             <span class="comment">%</span>
0833             <span class="comment">%use a uitable to assign the locations of each Results.mat</span>
0834             <span class="comment">%file, should be 4 of them, 2 per day</span>
0835 
0836             [file1,path1] = uigetfile(<span class="string">'*.*'</span>,<span class="string">'Select Day 1 File'</span>);
0837             [file2,path2] = uigetfile(<span class="string">'*.*'</span>,<span class="string">'Select Day 2 File'</span>);
0838             
0839             <span class="comment">%deal with day 1</span>
0840             load([path1,<span class="string">'Results.mat'</span>]);
0841             tlist1 = this.triallist;<span class="comment">% must be day1 instance loaded as this</span>
0842             <span class="keyword">if</span> strcmp(this.dominantleg,<span class="string">'R'</span>)
0843                 fast1 = rhits;
0844                 slow1 = lhits;
0845             <span class="keyword">else</span>
0846                 fast1 = lhits;
0847                 slow1 = rhits;
0848             <span class="keyword">end</span>
0849             
0850             clear rhits lhits
0851             
0852             load([path2,<span class="string">'Results.mat'</span>]);
0853             load([path2,file2]);<span class="comment">%make sure this is the day2 instance otherwise will probably crash</span>
0854             file3 = [file2(1:6) file2(end-8:end-4)];
0855             eval([<span class="string">'tlist2 = '</span> file3 <span class="string">'.triallist;'</span>]);
0856             <span class="keyword">if</span> strcmp(this.dominantleg,<span class="string">'R'</span>)
0857                 fast2 = rhits;
0858                 slow2 = lhits;
0859             <span class="keyword">else</span>
0860                 fast2 = lhits;
0861                 slow2 = rhits;
0862             <span class="keyword">end</span>
0863             clear rhits lhits
0864             
0865             <span class="keyword">if</span> length(tlist1)==length(tlist2)
0866                 train = find(strcmp(tlist1(:,4),<span class="string">'training'</span>));<span class="comment">%logicals of where training trials are</span>
0867                 base = find(strcmp(tlist1(:,4),<span class="string">'baseline'</span>));
0868                 adapt = find(strcmp(tlist1(:,4),<span class="string">'adaptation'</span>));
0869                 wash = find(strcmp(tlist1(:,4),<span class="string">'washout'</span>));
0870                 
0871                 colors1 = cell(length(tlist1),1);
0872                 colors2 = cell(length(tlist1),1);
0873                 <span class="keyword">for</span> z=1:length(tlist1)
0874                    <span class="keyword">if</span> strcmp(<span class="string">'train'</span>,tlist1(z,3))
0875                        colors1{z}=[0 102/256 204/256];
0876                        colors2{z}=[0 1 1];
0877                    <span class="keyword">else</span>
0878                        colors1{z}=[1 0 0];
0879                        colors2{z}=[1 128/256 0];
0880                    <span class="keyword">end</span>
0881                 <span class="keyword">end</span>
0882                 
0883                 <span class="keyword">for</span> z=1:length(fast1)
0884                     temp1 = fast1{z};
0885                     temp2 = fast2{z};
0886                     temp1(abs(temp1) &gt; 0.1) = [];
0887                     temp2(abs(temp2) &gt; 0.1) = [];
0888                     <span class="keyword">if</span> flag<span class="comment">%normalize</span>
0889                         temp1 = (temp1-mean(fast1{length(train)}))./abs(mean(fast1{length(train)}))*100;
0890                         temp2 = (temp2-mean(fast2{length(train)}))./abs(mean(fast2{length(train)}))*100;
0891                     <span class="keyword">end</span>
0892                     meanfast1(z) = mean(temp1);
0893                     meanfast2(z) = mean(temp2);
0894                     stdfast1(z) = std(temp1);
0895                     stdfast2(z) = std(temp2);
0896                 <span class="keyword">end</span>
0897                 
0898                 <span class="keyword">for</span> z=1:length(slow1)
0899                     temp1 = slow1{z};
0900                     temp2 = slow2{z};
0901                     temp1(abs(temp1) &gt; 0.1) = [];
0902                     temp2(abs(temp2) &gt; 0.1) = [];
0903                     <span class="keyword">if</span> flag<span class="comment">%normalize</span>
0904                         temp1 = (temp1-mean(slow1{length(train)}))./abs(mean(slow1{length(train)}))*100;
0905                         temp2 = (temp2-mean(slow2{length(train)}))./abs(mean(slow2{length(train)}))*100;
0906                     <span class="keyword">end</span>
0907                     meanslow1(z) = mean(temp1);
0908                     meanslow2(z) = mean(temp2);
0909                     stdslow1(z) = std(temp1);
0910                     stdslow2(z) = std(temp2);
0911                 <span class="keyword">end</span>
0912                 
0913                 hand = zeros(4,1);
0914                 <span class="comment">%fast leg</span>
0915                 figure(7)
0916                 subplot(2,1,1)
0917                 hold on
0918                 fill([0 2*length(train)+0.5 2*length(train)+0.5 0],[max([meanfast1 meanfast2])+1000 max([meanfast1 meanfast2])+1000 -1*max([meanfast1 meanfast2])-1000 -1*max([meanfast1 meanfast2])-1000],[230 230 230]./256);
0919                 fill([2*length(train)+0.5+2*length(base) 2*length(train)+2*length(base)+2*length(adapt)+0.5 2*length(train)+2*length(base)+2*length(adapt)+0.5 2*length(train)+0.5+2*length(base)],[max([meanfast1 meanfast2])+1000 max([meanfast1 meanfast2])+1000 -1*max([meanfast1 meanfast2])-1000 -1*max([meanfast1 meanfast2])-1000],[230 230 230]./256);
0920                 h = 1:2:2*length(meanfast1);
0921                 h2 = 1.5:2:2*length(meanfast2);
0922 <span class="comment">%                 plot([0 2*length(meanfast1)+1],[0.0375 0.0375],'--k','LineWidth',2);%tolerance lines</span>
0923 <span class="comment">%                 plot([0 2*length(meanfast1)+1],[-0.0375 -0.0375],'--k','LineWidth',2);</span>
0924 <span class="comment">%                 keyboard</span>
0925                 <span class="keyword">for</span> z = 1:2:length(h)<span class="comment">%trainings</span>
0926 <span class="comment">%                     figure(7)</span>
0927                     hand(1) = bar(h(z),meanfast1(z),0.5,<span class="string">'FaceColor'</span>,colors1{z});
0928                 <span class="keyword">end</span>
0929                 <span class="keyword">for</span> z = 2:2:length(h)<span class="comment">%evaluations</span>
0930 <span class="comment">%                     figure(7)</span>
0931                     hand(2) = bar(h(z),meanfast1(z),0.5,<span class="string">'FaceColor'</span>,colors1{z});
0932                 <span class="keyword">end</span>
0933                 <span class="keyword">for</span> z=1:2:length(h2)
0934 <span class="comment">%                     figure(7)</span>
0935                     hand(3) = bar(h2(z),meanfast2(z),0.5,<span class="string">'FaceColor'</span>,colors2{z});
0936                 <span class="keyword">end</span>
0937                 <span class="keyword">for</span> z=2:2:length(h2)
0938 <span class="comment">%                     figure(7)</span>
0939                     hand(4) = bar(h2(z),meanfast2(z),0.5,<span class="string">'FaceColor'</span>,colors2{z});
0940                 <span class="keyword">end</span>
0941                 <span class="keyword">if</span> ~flag
0942                     errorbar(h,meanfast1,stdfast1,<span class="string">'k'</span>,<span class="string">'LineWidth'</span>,1.5);
0943                     errorbar(h2,meanfast2,stdfast2,<span class="string">'k'</span>,<span class="string">'LineWidth'</span>,1.5);
0944                     plot([0 2*length(meanfast1)+1],[0.0375 0.0375],<span class="string">'--k'</span>,<span class="string">'LineWidth'</span>,2);<span class="comment">%tolerance lines</span>
0945                     plot([0 2*length(meanfast1)+1],[-0.0375 -0.0375],<span class="string">'--k'</span>,<span class="string">'LineWidth'</span>,2);
0946                     ylim([-1*max([meanfast1 meanfast2 stdfast1 stdfast2])-0.05 max([meanfast1 meanfast2 stdfast1 stdfast2])+0.05]);
0947                 <span class="keyword">else</span>
0948                     ylim([-1*abs(min([meanfast1 meanfast2]))-50 max([meanfast1 meanfast2])+50]);
0949                 <span class="keyword">end</span>
0950                 title([this.subjectcode <span class="string">' Fast Leg Day 1 vs. Day 2 Errors'</span>]);
0951                 ylabel(<span class="string">'% Error from Baseline'</span>);
0952                 legend(hand,<span class="string">'train D1'</span>,<span class="string">'eval D1'</span>,<span class="string">'train D2'</span>,<span class="string">'eval D2'</span>)
0953 <span class="comment">%                 keyboard</span>
0954 
0955 <span class="comment">%                 figure(7)</span>
0956                 subplot(2,1,2)
0957                 hold on
0958                 fill([0 2*length(train)+0.5 2*length(train)+0.5 0],[max([meanslow1 meanslow2])+1000 max([meanslow1 meanslow2])+1000 -1*max([meanslow1 meanslow2])-1000 -1*max([meanslow1 meanslow2])-1000],[230 230 230]./256);
0959                 fill([2*length(train)+0.5+2*length(base) 2*length(train)+2*length(base)+2*length(adapt)+0.5 2*length(train)+2*length(base)+2*length(adapt)+0.5 2*length(train)+0.5+2*length(base)],[max([meanslow1 meanslow2])+1000 max([meanslow1 meanslow2])+1000 -1*max([meanslow1 meanslow2])-1000 -1*max([meanslow1 meanslow2])-1000],[230 230 230]./256);
0960                 h = 1:2:2*length(meanslow1);
0961                 h2 = 1.5:2:2*length(meanslow2);
0962 <span class="comment">%                 plot([0 2*length(meanslow1)+1],[0.0375 0.0375],'--k','LineWidth',2);%tolerance lines</span>
0963 <span class="comment">%                 plot([0 2*length(meanslow1)+1],[-0.0375 -0.0375],'--k','LineWidth',2);</span>
0964                 <span class="keyword">for</span> z = 1:2:length(h)<span class="comment">%trainings</span>
0965 <span class="comment">%                     figure(8)</span>
0966                     hand(1) = bar(h(z),meanslow1(z),0.5,<span class="string">'FaceColor'</span>,colors1{z});
0967                 <span class="keyword">end</span>
0968                 <span class="keyword">for</span> z = 2:2:length(h)<span class="comment">%evaluations</span>
0969 <span class="comment">%                     figure(8)</span>
0970                     hand(2) = bar(h(z),meanslow1(z),0.5,<span class="string">'FaceColor'</span>,colors1{z});
0971                 <span class="keyword">end</span>
0972                 <span class="keyword">for</span> z=1:2:length(h2)
0973 <span class="comment">%                     figure(8)</span>
0974                     hand(3) = bar(h2(z),meanslow2(z),0.5,<span class="string">'FaceColor'</span>,colors2{z});
0975                 <span class="keyword">end</span>
0976                 <span class="keyword">for</span> z=2:2:length(h2)
0977 <span class="comment">%                     figure(8)</span>
0978                     hand(4) = bar(h2(z),meanslow2(z),0.5,<span class="string">'FaceColor'</span>,colors2{z});
0979                 <span class="keyword">end</span>
0980                 <span class="keyword">if</span> ~flag
0981                     errorbar(h,meanslow1,stdslow1,<span class="string">'k'</span>,<span class="string">'LineWidth'</span>,1.5);
0982                     errorbar(h2,meanslow2,stdslow2,<span class="string">'k'</span>,<span class="string">'LineWidth'</span>,1.5);
0983                     plot([0 2*length(meanslow1)+1],[0.0375 0.0375],<span class="string">'--k'</span>,<span class="string">'LineWidth'</span>,2);<span class="comment">%tolerance lines</span>
0984                     plot([0 2*length(meanslow1)+1],[-0.0375 -0.0375],<span class="string">'--k'</span>,<span class="string">'LineWidth'</span>,2);
0985                     ylim([-1*max([meanslow1 meanslow2 stdslow1 stdslow2])-0.05 max([meanslow1 meanslow2 stdslow1 stdslow2])+0.05]);
0986                 <span class="keyword">else</span>
0987                     ylim([-1*abs(min([meanslow1 meanslow2]))-50 max([meanslow1 meanslow2])+50]);
0988                 <span class="keyword">end</span>
0989                 title([this.subjectcode <span class="string">' Slow Leg Day 1 vs. Day 2 Errors'</span>]);
0990                 ylabel(<span class="string">'% Error from Baseline'</span>);
0991                 legend(hand,<span class="string">'train D1'</span>,<span class="string">'eval D1'</span>,<span class="string">'train D2'</span>,<span class="string">'eval D2'</span>)
0992 
0993                             <span class="keyword">end</span>
0994             
0995 <span class="comment">%             keyboard</span>
0996             
0997         <span class="keyword">end</span>
0998             
0999     <span class="keyword">end</span>
1000     
1001 <span class="keyword">end</span>
1002</pre></div>
<hr><address>Generated on Thu 06-Jun-2024 12:15:54 by <strong><a href="https://github.com/gllmflndn/m2html">m2html</a></strong> &copy; 2003-2022</address>
</body>
</html>